## å‰è¨€

è¿™ä¸ªåŒæ ·æ˜¯å†™åšå®¢çš„äº§å‡ºï¼Œä¹‹å‰åœ¨å†™åšå®¢çš„æ—¶å€™ï¼Œçå¼„äº†ä¸€ä¸ªæ¨¡æ¿å¼•æ“ï¼Œå½“æ—¶å°±æƒ³ä¹‹åæŠŠä»–ä¼˜åŒ–ä¸€ä¸‹ï¼ŒæŠŠ `Vue` å“åº”å¼åŸç†æ”¾è¿›å»ï¼Œå¼„æˆä¸€ä¸ªå°çš„å¯ä»¥ç”¨æ¥å‡å°‘æˆ‘å†™åšå®¢å‰ç«¯ä»£ç çš„ç»„ä»¶åŒ–çš„â€æ¡†æ¶â€œï¼Œäºæ˜¯æˆ‘å°±æ¥å¡«å‘äº†ã€‚è¿™ä¸ªåªæ˜¯è‡ªå·±ç”¨æ¥å­¦ä¹  `Vue2.0`å“åº”å¼åŸç†çš„ä¸€ä¸ªå°é¡¹ç›®ï¼Œä»£ç çš„å®ç°å¯èƒ½å¾ˆåˆçº§ï¼Œæœ‰äº›åœ°æ–¹å†™çš„ä¼šæ¯”è¾ƒå·®ï¼Œè¯·è§è°…ã€‚è¿™ç¯‡æ–‡ç« å…ˆçœ‹ä¸‹ï¼Œæœ€ç»ˆå®ç°çš„æ¡†æ¶çš„æˆæœã€‚

é¡¹ç›®æºç ï¼š[ä¼ é€é—¨](https://github.com/Ray-daydayup/myblog-webpack/tree/master/src/lib/min-vue)
å®ç°æ•ˆæœï¼š[æˆ‘çš„åšå®¢](http://raydaydayup.cn/)å°±æ˜¯ç”¨è¿™ä¸ªå°æ¡†æ¶æ”¹é€ çš„

## æˆæœå’ŒåŠŸèƒ½å±•ç¤º

å®ç°çš„è¿™ä¸ªå°æ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªåŒå‘ç»‘å®šçš„ç»„ä»¶åŒ–çš„å°æ¡†æ¶ï¼Œæœ‰è·¨ç»„ä»¶é€šä¿¡ï¼Œç»„ä»¶å±æ€§ï¼Œäº‹ä»¶ç»‘å®šï¼Œæ•°æ®ç»‘å®šï¼Œåˆ—è¡¨æ¸²æŸ“ç­‰åŠŸèƒ½ï¼Œä½†æ˜¯ä¹Ÿå­˜åœ¨å¾ˆå¤šç¼ºé™·çš„ï¼Œæ¯”å¦‚æ²¡å®ç°å¯¹ `html`ä¸­çš„æ¨¡æ¿ç»‘å®šã€ç»„ä»¶å±æ€§æ²¡æœ‰å£°æ˜ç­‰ã€‚åªæ˜¯ä¸€ä¸ªå­¦ä¹ çš„é¡¹ç›®ï¼Œå‹¿æ€ªå“ˆï¼Œå¸Œæœ›èƒ½ç»™ä½ ä»¬å¸¦æ¥å¸®åŠ©ã€‚

### å®šä¹‰å’Œæ³¨å†Œä¸€ä¸ªç»„ä»¶

ä»¿ç…§äº†`vue`çš„å†™æ³•ï¼Œå®ç°äº†ä¸€ä¸ªç»„ä»¶çš„å®šä¹‰å’Œæ³¨å†Œï¼Œå¹¶æ²¡æœ‰å…¨å±€å’Œå±€éƒ¨ç»„ä»¶çš„åŒºåˆ†ï¼Œéƒ½æ˜¯å…¨å±€ç»„ä»¶ã€‚

```js
import MVue from '@/components/index'

const tagsLink = {
  name: 'tags-link', // ç»„ä»¶åï¼Œå¿…éœ€
  template: 'a[href="javascript:;]@click.stop=navTag:tag@{$tag.name$}', // æ¨¡æ¿ï¼Œå¿…éœ€
  data () { // ç»„ä»¶å†…éƒ¨çš„å“åº”å¼æ•°æ®
    return {
       tag:{
           name: 'æ ‡ç­¾'
       }
    }
  },
  created() { // å®ä¾‹ mvue åˆ›å»ºçš„å›è°ƒ
    this.navTag(this.tag)
    this.$event.emmit('load-more') //è·¨ç»„ä»¶é€šä¿¡çš„äº‹ä»¶æ€»çº¿ï¼Œè§¦å‘äº‹ä»¶
  },
  methods: { // ç»„ä»¶å†…éƒ¨æ–¹æ³•
    navTag(tag) {
      const target = './tag.html'
      this.$router.navTo(target, { //ç®€å•çš„è·¯ç”±
        id: tag.tagId
      })
    }
  }
}

MVue.Component(tagsLink) //æ³¨å†Œç»„ä»¶
```

### æ ¹å®ä¾‹çš„å®šä¹‰

å®šä¹‰äº†ç»„ä»¶ä¹‹åè¦åœ¨`html`ä¸­ä½¿ç”¨çš„è¯ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªæ ¹å®ä¾‹ï¼Œä¸€ä¸ªå®Œæ•´çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¦‚ä¸‹ä»£ç ä¹¦å†™

```html
<div id="app">
    <article-list :articles="articles"></article-list> // ç»„ä»¶ä¹¦å†™ï¼Œå’Œå±æ€§ä¼ é€’ï¼Œåªæœ‰è¿™ä¸ªå†™æ³•ï¼Œæ²¡æœ‰åœ¨HTMLä¸­åšå“åº”å¼çš„ç»‘å®šè¯­æ³•
    <load-more :pages="pages"></load-more>
</div>
```

```js
import MVue from '@/components/index'
import router from '@/utils/router.js'
import articleList from './article-list.js'
import loadMore from './load-more.js'

MVue.router = router // æŠŠè·¯ç”±æ–¹æ³•æŒ‚ä¸Šå»
// æ³¨å†Œä½¿ç”¨ç»„ä»¶
MVue.Component(articleList)
MVue.Component(loadMore)
const mVue = new MVue({
  el: '#app', // 
  data: {
    pages: {
      text: 'è·å–æ›´å¤š',
      currentPage: 0,
      pageSize: 5,
      more: true
    },
    articles: []
  },
  created() {
    this.getArticles()
    this.$event.on('load-more', this.getArticles, this) //æ³¨å†Œè‡ªå®šä¹‰äº‹ä»¶
  },
  methods: {
    async getArticles() {
      if (!this.pages.more) {
        return
      }
      this.pages.currentPage++
      const res = await getArticleList(
        this.pages.currentPage,
        this.pages.pageSize,
        true,
        { articleState: 1 }
      )
      if (res.flag) {
        if (res.data.length < this.pages.pageSize) {
          this.pages.more = false
          this.pages.text = 'æ²¡æœ‰æ›´å¤šäº†' 
        }
        this.articles.push(...res.data)
      }
    },
  }
})

//ç»„ä»¶æ¸²æŸ“ï¼Œåˆ›å»ºdom æŠŠç»„ä»¶æ·»åŠ è¿›DOMæ ‘
mVue.render(() => {
  document.querySelector('#mask').style.display = 'none'
})
```

### ç»„ä»¶æ¨¡æ¿è¯­æ³•

è¿™ä¸ªå’Œæˆ‘ä¹‹å‰å†™çš„å°æ¨¡æ¿å¼•æ“æ˜¯ç±»ä¼¼çš„

1. **å•ä¸ªå…ƒç´ çš„å±æ€§å’Œæ–‡æœ¬çš„å®šä¹‰**ï¼š `div[class="box]{hahaha}` è¡¨ç¤º `<div class="box">hahaha</div>`
   - `[]` å±æ€§  =ã€‹ å†™æ³•ï¼š`[class="box,id="box]`
   - `{}` æ–‡æœ¬  =ã€‹ å†™æ³•ï¼š `{hahaha}`
2. **æ•°æ®ç»‘å®šä¸è¿‡æ»¤å™¨**ï¼š`h6[class="font-$regular$]{ åˆ›å»ºæ—¶é—´ï¼š$article.createtime$ -- ä¿®æ”¹æ—¶é—´ï¼š$article.modifiedtime:time$}`
    - `$data$` ä¸¤ä¸ª`$`ä¹‹é—´å†™ä¸Šç»„ä»¶å®ä¾‹å®šä¹‰çš„å˜é‡åæˆ–è€…çˆ¶ç»„ä»¶ä¼ å…¥çš„å˜é‡
    - `:`ä¹‹åçš„ä¸ºç»„ä»¶å®ä¾‹å®šä¹‰çš„æ–¹æ³•ï¼Œä¼šå°†å‡½æ•°è¿”å›ç»“æœå¡«å……è½½`$`ä¹‹é—´
3. **äº‹ä»¶çš„ç»‘å®š**ï¼š`a@click.stop=nav:article@[href="javascript:;,class="title]`
    - ä¸¤ä¸ª`@`ä¹‹é—´ä¸ºç»„ä»¶ç»‘å®šçš„äº‹ä»¶éƒ¨åˆ†`äº‹ä»¶å.stop=æ–¹æ³•å:å‚æ•°1:å‚æ•°2`
    - åªæœ‰é˜»æ­¢å†’æ³¡çš„åŠŸèƒ½ï¼Œä¼ å…¥çš„å‚æ•°å¯ä»¥æœ‰å¤šä¸ªä¹Ÿå¯ä»¥ä¸ä¼ ï¼Œå¯ä»¥æ˜¯å˜é‡åï¼Œä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²
4. **`innerHtml`çš„ä½¿ç”¨**ï¼š`div[class="markdown-body,style="padding: 0;]^article.abstract:markdown^`
    - ä¸¤ä¸ª`^`ä¹‹é—´æ˜¯å¯¹åº”çš„`html`ç»‘å®šéƒ¨åˆ†ï¼ˆä¼šå¿½ç•¥`{}`ï¼‰=ã€‹`å˜é‡å:æ–¹æ³•å`
    - å†…éƒ¨çš„æ•ˆæœå°±æ˜¯`div.innerHtml = è¿”å›å€¼`
5. **æ¨¡æ¿ä¸­è‡ªå®šä¹‰ç»„ä»¶çš„ä½¿ç”¨**ï¼š`article-item[:article="item]`
    - ç»„ä»¶åªè¦åœ¨æ¸²æŸ“ä¹‹å‰æ³¨å†Œå°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨
    - `[:article="item]`è¡¨ç¤º `:ç»„ä»¶çš„å±æ€§å="å½“å‰ç»„ä»¶çš„å˜é‡å`ï¼Œå±æ€§åç»‘å®šåå¯ä»¥åœ¨ç»„ä»¶ä¸­ç›´æ¥ä½¿ç”¨è¯¥å˜é‡åï¼ˆæ²¡æœ‰å£°æ˜ï¼‰ï¼Œå±æ€§å¯ä»¥å±‚å±‚ä¼ 
6. **å…ƒç´ å±‚çº§å…³ç³»**ï¼š`div>(a+article-item)`
    - `>` çˆ¶å­å…³ç³» 
    -  `+` å…„å¼Ÿå…³ç³»  
    - `()` ä¼˜å…ˆè¿ç®—åŒä¸€å±‚çº§
7. **åˆ—è¡¨æ¸²æŸ“çš„ä½¿ç”¨**
    - ç”±äºåˆ—è¡¨æ¸²æŸ“æ¯”è¾ƒéš¾ææˆ‘å°±ç®€å•å®ç°äº†ä¸€ä¸‹ï¼Œæœ‰è®¸å¤šé™åˆ¶
    - åªèƒ½é’ˆå¯¹è‡ªå®šä¹‰ç»„ä»¶åˆ—è¡¨æ¸²æŸ“
    - ä¸èƒ½åœ¨`html`ä¸­ä½¿ç”¨
    - åˆ—è¡¨æ¸²æŸ“ç»„ä»¶çš„å‰é¢å¿…é¡»æœ‰çˆ¶çº§å…ƒç´ 
    - ä½¿ç”¨ç¤ºä¾‹

```js
// htmlä¸­ä½¿ç”¨
<div id="app">
    <tags-list></tags-list> // ç»„ä»¶ä¹¦å†™
</div>
/******** ç»„ä»¶å®šä¹‰ ********/
//çˆ¶ç»„ä»¶
{
  name: 'tags-list',
  template: 'div>tags-link%item in tags%[:tag="item]',
  data () { // ç»„ä»¶å†…éƒ¨çš„å“åº”å¼æ•°æ®
    return {
       tags:[{name: 1},{name: 2}]
    }
  },
}
//è¦æ¸²æŸ“çš„å­ç»„ä»¶å®šä¹‰
{
  name: 'tags-link',
  template: 'a[href="javascript:;]@click.stop=navTag:tag@{$tag.name$}',
}
```

é‚£ä¹ˆæœ€ç»ˆæ¸²æŸ“çš„ç»“æœå°±æ˜¯

```html
<div>
    <a href="javascript:;">1</a>
    <a href="javascript:;">2</a>
</div>
```

## æ•´ä½“æ€è·¯

å®ç°è¿™ä¸ªå°çš„ç»„ä»¶åŒ–æ¡†æ¶ï¼Œä¸»è¦åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ï¼šå“åº”å¼çš„å®ç°ã€æ¨¡æ¿ç¼–è¯‘çš„å®ç°å’Œ`MVue`ç±»çš„å®ç°ã€‚

- å“åº”å¼çš„å®ç°ï¼šä¸»è¦æ˜¯å®ç°`vue2.0`çš„å“åº”å¼åŸç†ï¼Œå¯¹å“åº”å¼æ•°æ®å®ç°ç›‘å¬ã€‚
- æ¨¡æ¿ç¼–è¯‘ï¼šä¸»è¦æ˜¯å®ç°å¦‚ä½•æ ¹æ®æ¨¡æ¿è¯­æ³•ç”ŸæˆDOMå…ƒç´ å’Œæ·»åŠ å“åº”å¼ä¾èµ–ã€‚
- `MVue`ç±»ï¼š ä¸»è¦æ˜¯è´Ÿè´£æ ¹æ®ä¼ å…¥çš„ç”¨æˆ·æ•°æ®æ¥æ•´åˆå“åº”å¼å’Œè‡ªå®šä¹‰ç»„ä»¶çš„ç®¡ç†

ç»„ä»¶åŒ–çš„æ€è·¯ï¼šåˆ©ç”¨`MVue`ç±»çš„é™æ€å±æ€§ï¼Œå®ç°ä¸€ä¸ªå…¨å±€å”¯ä¸€å¯¹è±¡ï¼Œå­˜å‚¨ç»„ä»¶å¯¹åº”çš„ç»„ä»¶å·¥å‚å®ä¾‹ï¼ˆè‡ªå·±èµ·çš„ğŸ˜‚ï¼‰å’Œå“åº”å¼å®ä¾‹çš„é…ç½®çš„å¯¹ç»„ä»¶å®ç°ç®¡ç†ã€‚å½“æ³¨å†Œç»„ä»¶çš„æ—¶å€™æ ¹æ®å¯¹åº”çš„é…ç½®ç”Ÿæˆå¯¹åº”çš„å“åº”å¼å®ä¾‹é…ç½®å’Œç»„ä»¶å·¥å‚å®ä¾‹ï¼Œå¹¶ä¿å­˜èµ·æ¥ã€‚å½“ç»„ä»¶æ ¹å®ä¾‹è¢«æŒ‚è½½æ—¶ï¼ŒæŸ¥æ‰¾å¯¹åº”çš„ç»„ä»¶ï¼Œåˆ©ç”¨ç»„ä»¶å·¥å‚å®ä¾‹å’Œå¯¹åº”çš„å“åº”å¼é…ç½®ï¼Œç”Ÿæˆ `DOM`ç‰‡æ®µï¼Œç„¶åæŒ‚è½½åˆ°`DOMæ ‘`å¯¹åº”çš„ä½ç½®ã€‚

æ•´ä½“çš„æ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤º

![20200720-192742-0296.jpg](https://gitee.com/Raydaydayup/images/raw/master/20200720-192742-0296.jpg)

## æ€»ç»“

è¿™ä¸ªå°æ¡†æ¶æ€»ä½“å®ç°çš„æ€è·¯å’Œå®ç°çš„åŠŸèƒ½å¤§æ¦‚å°±æ˜¯è¿™äº›ï¼Œä¸€äº›ç»†èŠ‚åç»­çš„æ–‡ç« æ…¢æ…¢å†™ï¼Œåé¢ä¼šå†™å“åº”å¼åŸç†çš„å®ç°å’Œä¸€äº›ç»„ä»¶ç¼–è¯‘çš„ä¸œè¥¿ï¼Œä¸æ˜¯æ‰€æœ‰ä¸œè¥¿éƒ½æ˜¯ä»`vue`æºç æ¥çš„ï¼Œæœ‰äº›ä¸œè¥¿ä»£ç å†™çš„å¾ˆå·®åŠ²ï¼Œè§è°…ã€‚æŒç»­å­¦ä¹ æ€»ç»“ï¼Œå¸Œæœ›è‡ªå·±ä¸€ç›´åœ¨å‰è¿›è·¯ä¸Šâ€¦â€¦

é¡¹ç›®æºç ï¼š[ä¼ é€é—¨](https://github.com/Ray-daydayup/myblog-webpack/tree/master/src/lib/min-vue)
å®ç°æ•ˆæœï¼š[æˆ‘çš„åšå®¢](http://raydaydayup.cn/)å°±æ˜¯ç”¨è¿™ä¸ªå°æ¡†æ¶æ”¹é€ çš„