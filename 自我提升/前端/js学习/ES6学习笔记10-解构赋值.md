## Desctructuring

在 ES6 中新增了变量赋值的方式：解构赋值。如果对这个概念不了解，我们可以快速展示一个小示例一睹风采：

```js
let arr = ['Ilya', 'Kantor']
let firstName = arr[0]
let surname = arr[1]
```
        
想从数组中找出有意义的项要单独赋值给变量（一一的写），在 ES6 中就可以这样写了：

```js
let [firstName, surname] = ['Ilya', 'Kantor']
console.log(firstName) // Ilya
console.log(surname) // Kantor
```
        
解构赋值重点是在赋值，赋值的元素是要拷贝出来赋值给变量，**赋值的元素本身是不会被改变的**。

是不是非常的刺激，在解构赋值里用的最多的就是 `Object` 和 `Array` ，我们可以分别来看下两者的解构赋值是如何操作的。

### Array Destructuring

1. 可以跳过赋值元素
如果想忽略数组的某个元素对变量进行赋值，可以使用逗号来处理。

```js
// second element is not needed
let [firstName, , title] = ["Julius", "Caesar", "Consul", "of the Roman Republic"];
console.log( title ); // Consul
```
        
2. 赋值元素可以是任意可遍历的对象。赋值的元素不仅是数组，它可以是任意可遍历的对象

```js
let [a, b, c] = "abc"; // ["a", "b", "c"]
let [one, two, three] = new Set([1, 2, 3]);
```
        
3. 左边的变量   被赋值的变量还可以是对象的属性，不局限于单纯的变量。

```js
let user = {};
[user.name, user.surname] = "Ilya Kantor".split(' ');
console.log(user.name); // Ilya
```
        
4. 循环体    解构赋值在循环体中的应用，可以配合 `entries` 使用。

```js
let user = {
    name: "John",
    age: 30
};
// loop over keys-and-values
for (let [key, value] of Object.entries(user)) {
    console.log(`${key}:${value}`); // name:John, then age:30
}
```
        
5. 当然，对于 `map` 对象依然适用：

```js
let user = new Map();
user.set("name", "John");
user.set("age", "30");
for (let [key, value] of user.entries()) {
    console.log(`${key}:${value}`); // name:John, then age:30
}
```
        
6. rest 参数

```js
let [name1, name2, ...rest] = ["Julius", "Caesar", "Consul", "of the Roman Republic"];
console.log(name1); // Julius
console.log(name2); // Caesar       
// Note that type of `rest` is Array.
console.log(rest[0]); // Consul
console.log(rest[1]); // of the Roman Republic
console.log(rest.length); // 2  
```

**我们可以使用 `rest`来接受赋值数组的剩余元素，不过要确保这个 `rest` 参数是放在被赋值变量的最后一个位置上**。

7. 默认值

- 如果数组的内容少于变量的个数，并不会报错，没有分配到内容的变量会是 `undefined`。

```js
let [firstName, surname] = [];
console.log(firstName); // undefined
console.log(surname); // undefined
```

- 当然你也可以给变量赋予默认值，防止 `undefined` 的情况出现：

```js
// default values
let [name = "Guest", surname = "Anonymous"] = ["Julius"];
console.log(name);    // Julius (from array)
console.log(surname); // Anonymous (default used)
```

- **注意，ES6 内部使用严格相等运算符（`===`），判断一个位置是否有值。所以，只有当一个数组成员严格等于 `undefined` ，默认值才会生效**
- **如果一个数组成员是null，默认值就不会生效，因为null不严格等于undefined**
- **如果默认值是一个表达式，那么这个表达式是惰性求值的，即只有在用到的时候，才会求值**
- **默认值可以引用解构赋值的其他变量，但该变量必须已经声明**

### Object Destructuring

1. 基本用法

```js
let {var1, var2} = {var1:…, var2…}
```

- 大致的意思是我们有一个 `Object` 想把里面的属性分别拿出来而无需通过调用属性的方式赋值给指定的变量。具体的做法是在赋值的左侧声明一个和 `Object` 结构等同的模板，然后把关心属性的 `value` 指定为新的变量即可。

```js
let options = {
    title: "Menu",
    width: 100,
    height: 200
};
let {title, width, height} = options;
alert(title);  // Menu
alert(width);  // 100
alert(height); // 200
//等同于
let {title: title, width: width, height: height} = options;
```

- 在这个结构赋值的过程中，左侧的“模板”结构要与右侧的 Object 一致，但是属性的顺序无需一致。
        
- 如果不想这么写或者想使用其他的变量名，可以自定义的，如下：

```js
let {width: w, height: h, title} = options;
```
        
2. 默认值

- 当然，这个赋值的过程中也是可以指定默认值的，这样做：

```js
let options = {
          title: "Menu"
        };
let {width = 100, height = 200, title} = options;
alert(title);  // Menu
alert(width);  // 100
alert(height); // 200
```
        
3. `rest` 运算符

如果我们想象操作数组一样，只关心指定的属性，其他可以暂存到一个变量下，这就要用到 `rest` 运算符了

```js
let options = {
    title: "Menu",
    height: 200,
    width: 100
};
let {title, ...rest} = options;
// now title="Menu", rest={height: 200, width: 100}
alert(rest.height);  // 200
alert(rest.width);   // 100
```
        
4. 嵌套对象

- 如果一个 `Array` 或者 `Object` 比较复杂，它嵌套了 `Array` 或者 `Object`，那**只要被赋值的结构和右侧赋值的元素一致**就好了。

```js
let options = {
    size: {
        width: 100,
        height: 200
    },
    items: ["Cake", "Donut"],
    extra: true    // something extra that we will not destruct
};
// destructuring assignment on multiple lines for clarity
let {
    size: { // put size here
        width,    
        height
    },
    items: [item1, item2], // assign items here
          title = "Menu" // not present in the object (default value is used)
    } = options;
alert(title);  // Menu
alert(width);  // 100
alert(height); // 200
alert(item1);  // Cake
alert(item2);  // Donut
```
        
**思考**

- 有时候我们写一个函数需要传入很多参数，而且很多参数是可选的，是否可以利用解构赋值来简化操作呢？
- 如何在业务开发中对接口数据进行解构赋值呢？

**阅读**

<ol>
        <li><a href="https://www.sitepoint.com/es6-destructuring-assignment/">Destructuring Assignment</a></li>
        <li><a href="https://ponyfoo.com/articles/es6-destructuring-in-depth">ES6 JavaScript Destructuring in Depth</a></li>
        <li><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment">解构赋值</a></li>
</ol>